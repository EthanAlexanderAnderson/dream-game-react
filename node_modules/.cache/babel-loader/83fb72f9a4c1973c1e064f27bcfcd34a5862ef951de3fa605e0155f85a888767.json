{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Ethan/Desktop/Dream Game Site/v4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Ethan/Desktop/Dream Game Site/v4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import io from'socket.io-client';import{useEffect,useState}from\"react\";import ButtonSection from'./buttonSection';import PlayerSection from'./playerSection';import ImageSection from'./imageSection';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket=io({autoConnect:false});var IS_PROD=process.env.NODE_ENV===\"production\";var URL=IS_PROD?\"http://www.ethananderson.ca/\":\"http://localhost:3001\";var myGuess=\"\";function App(){// states\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messageReceived=_useState4[0],setMessageReceived=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),textSection=_useState6[0],setTextSection=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),name=_useState10[0],setName=_useState10[1];var _useState11=useState(\"before\"),_useState12=_slicedToArray(_useState11,2),status=_useState12[0],setStatus=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),players=_useState14[0],setPlayers=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),scores=_useState16[0],setScores=_useState16[1];// player come online\nvar playerJoin=function playerJoin(name){// connect to server\nsocket=io.connect(URL);// set name on user\nsetName(name);// update player list on user\nsetPlayers(function(previous){return[].concat(_toConsumableArray(previous),[name]);});// update player list on peers\nsocket.emit(\"player_join_u\",name);};// start round\nvar start=function start(){socket.emit(\"get_random_dream_u\");};// player guesses\nvar guess=function guess(data){myGuess=data;socket.emit(\"guess\",myGuess);console.log(\"guesser: \"+name);console.log(\"my guess: \"+myGuess);setStatus(\"guessed\");};// send message to socket\nvar sendMessage=function sendMessage(){socket.emit(\"send_message\",{message:message,name:name});};// socket handlers -----------\nvar receiveMessage=function receiveMessage(data){setMessageReceived(data.name+\": \"+data.message);};var playerJoinD=function playerJoinD(data){setPlayers(function(previous){return[].concat(_toConsumableArray(previous),[data.data]);});};var getRandomDreamD=function getRandomDreamD(data){setTextSection(data.dream);setStatus(\"during\");console.log(\"dreamer: \"+data.dreamer);setImage(data.dream.split(\" \").join(\"_\").replace(/[ &?]/g,\"\"));};// when all players guessed\nvar allGuessed=function allGuessed(answer){if(answer===myGuess){setTextSection(\"CORRECT\\nANSWER: \"+answer+\"\\nYou guessed: \"+myGuess);socket.emit(\"increment_score\");}else{setTextSection(\"INCORRECT\\nANSWER: \"+answer+\"\\nYou guessed: \"+myGuess);}setStatus(\"after\");setImage(\"\");};var updateScores=function updateScores(data){setScores(data);};// receive from socket\nuseEffect(function(){socket.on(\"receive_message\",receiveMessage);socket.on(\"player_join_d\",playerJoinD);socket.on(\"get_random_dream_d\",getRandomDreamD);socket.on(\"all_guessed\",allGuessed);socket.on(\"update_scores\",updateScores);return function(){socket.off(\"receive_message\");socket.off(\"player_join_d\");socket.off(\"get_random_dream_d\");socket.off(\"all_guessed\");};},[socket]);// display\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:textSection}),/*#__PURE__*/_jsx(ButtonSection,{name:name,playerJoin:playerJoin,status:status,start:start,guess:guess}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(PlayerSection,{name:name,scores:scores,status:status}),/*#__PURE__*/_jsx(ImageSection,{image:image})]});}export default App;/*\r\n      <h1>Players:</h1>\r\n      <div>\r\n        {players.map(item => {\r\n          return <div>{item}</div>;\r\n        })}\r\n      </div>\r\n\r\n      <input \r\n        placeholder=\"Message...\" \r\n        onChange={(event) => {\r\n          setMessage(event.target.value);\r\n        }}\r\n      />\r\n      <button onClick={sendMessage}> Send Message</button>\r\n\r\n      <h1>Message:</h1>\r\n      {messageReceived}\r\n*/","map":{"version":3,"names":["io","useEffect","useState","ButtonSection","PlayerSection","ImageSection","jsx","_jsx","jsxs","_jsxs","socket","autoConnect","IS_PROD","process","env","NODE_ENV","URL","myGuess","App","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","messageReceived","setMessageReceived","_useState5","_useState6","textSection","setTextSection","_useState7","_useState8","image","setImage","_useState9","_useState10","name","setName","_useState11","_useState12","status","setStatus","_useState13","_useState14","players","setPlayers","_useState15","_useState16","scores","setScores","playerJoin","connect","previous","concat","_toConsumableArray","emit","start","guess","data","console","log","sendMessage","receiveMessage","playerJoinD","getRandomDreamD","dream","dreamer","split","join","replace","allGuessed","answer","updateScores","on","off","className","children"],"sources":["C:/Users/Ethan/Desktop/Dream Game Site/v4/src/App.js"],"sourcesContent":["import io from 'socket.io-client'\r\nimport { useEffect, useState} from \"react\";\r\nimport ButtonSection from './buttonSection';\r\nimport PlayerSection from './playerSection';\r\nimport ImageSection from './imageSection';\r\nvar socket = io({ autoConnect: false });\r\nconst IS_PROD = process.env.NODE_ENV === \"production\";\r\nconst URL = IS_PROD ? \"http://www.ethananderson.ca/\" : \"http://localhost:3001\";\r\n\r\nvar myGuess = \"\";\r\n\r\nfunction App() {\r\n  // states\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageReceived, setMessageReceived] = useState(\"\");\r\n  const [textSection, setTextSection] = useState(\"\");\r\n  const [image, setImage] = useState(\"\");\r\n  const [name, setName] = useState(\"\");\r\n  const [status, setStatus] = useState(\"before\");\r\n  const [players, setPlayers] = useState([]);\r\n  const [scores, setScores] = useState([]);\r\n\r\n  // player come online\r\n  const playerJoin = (name) => {\r\n    // connect to server\r\n    socket = io.connect(URL);\r\n    // set name on user\r\n    setName(name);\r\n    // update player list on user\r\n    setPlayers(previous => [...previous, name])\r\n    // update player list on peers\r\n    socket.emit(\"player_join_u\", name);\r\n  };\r\n\r\n  // start round\r\n  const start = () => {\r\n    socket.emit(\"get_random_dream_u\");\r\n  };\r\n\r\n  // player guesses\r\n  const guess = (data) => {\r\n    myGuess = data;\r\n    socket.emit(\"guess\", myGuess);\r\n    console.log(\"guesser: \" + name);\r\n    console.log(\"my guess: \" + myGuess);\r\n    setStatus(\"guessed\");\r\n  }\r\n\r\n  // send message to socket\r\n  const sendMessage = () => {\r\n    socket.emit(\"send_message\", { message, name });\r\n  }\r\n\r\n  // socket handlers -----------\r\n  const receiveMessage = (data) => {\r\n    setMessageReceived(data.name + \": \" + data.message);\r\n  }\r\n\r\n  const playerJoinD = (data) => {\r\n    setPlayers(previous => [...previous, data.data])\r\n  }\r\n\r\n  const getRandomDreamD = (data) => {\r\n    setTextSection(data.dream);\r\n    setStatus(\"during\");\r\n    console.log(\"dreamer: \" + data.dreamer);\r\n    setImage(data.dream.split(\" \").join(\"_\").replace(/[ &?]/g, \"\"));\r\n  }\r\n\r\n  // when all players guessed\r\n  const allGuessed = (answer) => {\r\n    if (answer === myGuess) {\r\n      setTextSection(\"CORRECT\\nANSWER: \" + answer + \"\\nYou guessed: \" + myGuess);\r\n      socket.emit(\"increment_score\");\r\n    } else {\r\n      setTextSection(\"INCORRECT\\nANSWER: \" + answer + \"\\nYou guessed: \" + myGuess);\r\n    }\r\n    setStatus(\"after\");\r\n    setImage(\"\");\r\n  }\r\n\r\n  const updateScores = (data) => {\r\n    setScores(data);\r\n  }\r\n\r\n  // receive from socket\r\n  useEffect(() => {\r\n\r\n    socket.on(\"receive_message\", receiveMessage);\r\n    socket.on(\"player_join_d\", playerJoinD);\r\n    socket.on(\"get_random_dream_d\", getRandomDreamD);\r\n    socket.on(\"all_guessed\", allGuessed);\r\n    socket.on(\"update_scores\", updateScores);\r\n\r\n    return () => {\r\n      socket.off(\"receive_message\");\r\n      socket.off(\"player_join_d\");\r\n      socket.off(\"get_random_dream_d\");\r\n      socket.off(\"all_guessed\");\r\n    };\r\n\r\n  }, [socket]);\r\n\r\n  // display\r\n  return (\r\n    <div className=\"App container\">\r\n\r\n      <br></br>\r\n      <p>{textSection}</p>\r\n      <ButtonSection name={name} playerJoin={playerJoin} status={status} start={start} guess={guess}/>\r\n      <br></br>\r\n\r\n      <PlayerSection name={name} scores={scores} status={status}/>\r\n\r\n      <ImageSection image={image} />\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n/*\r\n      <h1>Players:</h1>\r\n      <div>\r\n        {players.map(item => {\r\n          return <div>{item}</div>;\r\n        })}\r\n      </div>\r\n\r\n      <input \r\n        placeholder=\"Message...\" \r\n        onChange={(event) => {\r\n          setMessage(event.target.value);\r\n        }}\r\n      />\r\n      <button onClick={sendMessage}> Send Message</button>\r\n\r\n      <h1>Message:</h1>\r\n      {messageReceived}\r\n*/"],"mappings":"sQAAA,MAAO,CAAAA,EAAE,KAAM,kBAAkB,CACjC,OAASC,SAAS,CAAEC,QAAQ,KAAO,OAAO,CAC1C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAC3C,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC1C,GAAI,CAAAC,MAAM,CAAGV,EAAE,CAAC,CAAEW,WAAW,CAAE,KAAM,CAAC,CAAC,CACvC,GAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAK,YAAY,CACrD,GAAM,CAAAC,GAAG,CAAGJ,OAAO,CAAG,8BAA8B,CAAG,uBAAuB,CAE9E,GAAI,CAAAK,OAAO,CAAG,EAAE,CAEhB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb;AACA,IAAAC,SAAA,CAA8BjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC1B,IAAAI,UAAA,CAA8CtB,QAAQ,CAAC,EAAE,CAAC,CAAAuB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAnDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,IAAAG,UAAA,CAAsC1B,QAAQ,CAAC,EAAE,CAAC,CAAA2B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAA3CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,IAAAG,UAAA,CAA0B9B,QAAQ,CAAC,EAAE,CAAC,CAAA+B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IACtB,IAAAG,UAAA,CAAwBlC,QAAQ,CAAC,EAAE,CAAC,CAAAmC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAA7BE,IAAI,CAAAD,WAAA,IAAEE,OAAO,CAAAF,WAAA,IACpB,IAAAG,WAAA,CAA4BtC,QAAQ,CAAC,QAAQ,CAAC,CAAAuC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAAvCE,MAAM,CAAAD,WAAA,IAAEE,SAAS,CAAAF,WAAA,IACxB,IAAAG,WAAA,CAA8B1C,QAAQ,CAAC,EAAE,CAAC,CAAA2C,WAAA,CAAAxB,cAAA,CAAAuB,WAAA,IAAnCE,OAAO,CAAAD,WAAA,IAAEE,UAAU,CAAAF,WAAA,IAC1B,IAAAG,WAAA,CAA4B9C,QAAQ,CAAC,EAAE,CAAC,CAAA+C,WAAA,CAAA5B,cAAA,CAAA2B,WAAA,IAAjCE,MAAM,CAAAD,WAAA,IAAEE,SAAS,CAAAF,WAAA,IAExB;AACA,GAAM,CAAAG,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAId,IAAI,CAAK,CAC3B;AACA5B,MAAM,CAAGV,EAAE,CAACqD,OAAO,CAACrC,GAAG,CAAC,CACxB;AACAuB,OAAO,CAACD,IAAI,CAAC,CACb;AACAS,UAAU,CAAC,SAAAO,QAAQ,WAAAC,MAAA,CAAAC,kBAAA,CAAQF,QAAQ,GAAEhB,IAAI,IAAC,CAAC,CAC3C;AACA5B,MAAM,CAAC+C,IAAI,CAAC,eAAe,CAAEnB,IAAI,CAAC,CACpC,CAAC,CAED;AACA,GAAM,CAAAoB,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAA,CAAS,CAClBhD,MAAM,CAAC+C,IAAI,CAAC,oBAAoB,CAAC,CACnC,CAAC,CAED;AACA,GAAM,CAAAE,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAIC,IAAI,CAAK,CACtB3C,OAAO,CAAG2C,IAAI,CACdlD,MAAM,CAAC+C,IAAI,CAAC,OAAO,CAAExC,OAAO,CAAC,CAC7B4C,OAAO,CAACC,GAAG,CAAC,WAAW,CAAGxB,IAAI,CAAC,CAC/BuB,OAAO,CAACC,GAAG,CAAC,YAAY,CAAG7C,OAAO,CAAC,CACnC0B,SAAS,CAAC,SAAS,CAAC,CACtB,CAAC,CAED;AACA,GAAM,CAAAoB,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxBrD,MAAM,CAAC+C,IAAI,CAAC,cAAc,CAAE,CAAEnC,OAAO,CAAPA,OAAO,CAAEgB,IAAI,CAAJA,IAAK,CAAC,CAAC,CAChD,CAAC,CAED;AACA,GAAM,CAAA0B,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIJ,IAAI,CAAK,CAC/BjC,kBAAkB,CAACiC,IAAI,CAACtB,IAAI,CAAG,IAAI,CAAGsB,IAAI,CAACtC,OAAO,CAAC,CACrD,CAAC,CAED,GAAM,CAAA2C,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIL,IAAI,CAAK,CAC5Bb,UAAU,CAAC,SAAAO,QAAQ,WAAAC,MAAA,CAAAC,kBAAA,CAAQF,QAAQ,GAAEM,IAAI,CAACA,IAAI,IAAC,CAAC,CAClD,CAAC,CAED,GAAM,CAAAM,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIN,IAAI,CAAK,CAChC7B,cAAc,CAAC6B,IAAI,CAACO,KAAK,CAAC,CAC1BxB,SAAS,CAAC,QAAQ,CAAC,CACnBkB,OAAO,CAACC,GAAG,CAAC,WAAW,CAAGF,IAAI,CAACQ,OAAO,CAAC,CACvCjC,QAAQ,CAACyB,IAAI,CAACO,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,QAAQ,CAAE,EAAE,CAAC,CAAC,CACjE,CAAC,CAED;AACA,GAAM,CAAAC,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,MAAM,CAAK,CAC7B,GAAIA,MAAM,GAAKxD,OAAO,CAAE,CACtBc,cAAc,CAAC,mBAAmB,CAAG0C,MAAM,CAAG,iBAAiB,CAAGxD,OAAO,CAAC,CAC1EP,MAAM,CAAC+C,IAAI,CAAC,iBAAiB,CAAC,CAChC,CAAC,IAAM,CACL1B,cAAc,CAAC,qBAAqB,CAAG0C,MAAM,CAAG,iBAAiB,CAAGxD,OAAO,CAAC,CAC9E,CACA0B,SAAS,CAAC,OAAO,CAAC,CAClBR,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAED,GAAM,CAAAuC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAId,IAAI,CAAK,CAC7BT,SAAS,CAACS,IAAI,CAAC,CACjB,CAAC,CAED;AACA3D,SAAS,CAAC,UAAM,CAEdS,MAAM,CAACiE,EAAE,CAAC,iBAAiB,CAAEX,cAAc,CAAC,CAC5CtD,MAAM,CAACiE,EAAE,CAAC,eAAe,CAAEV,WAAW,CAAC,CACvCvD,MAAM,CAACiE,EAAE,CAAC,oBAAoB,CAAET,eAAe,CAAC,CAChDxD,MAAM,CAACiE,EAAE,CAAC,aAAa,CAAEH,UAAU,CAAC,CACpC9D,MAAM,CAACiE,EAAE,CAAC,eAAe,CAAED,YAAY,CAAC,CAExC,MAAO,WAAM,CACXhE,MAAM,CAACkE,GAAG,CAAC,iBAAiB,CAAC,CAC7BlE,MAAM,CAACkE,GAAG,CAAC,eAAe,CAAC,CAC3BlE,MAAM,CAACkE,GAAG,CAAC,oBAAoB,CAAC,CAChClE,MAAM,CAACkE,GAAG,CAAC,aAAa,CAAC,CAC3B,CAAC,CAEH,CAAC,CAAE,CAAClE,MAAM,CAAC,CAAC,CAEZ;AACA,mBACED,KAAA,QAAKoE,SAAS,CAAC,eAAe,CAAAC,QAAA,eAE5BvE,IAAA,QAAQ,CAAC,cACTA,IAAA,MAAAuE,QAAA,CAAIhD,WAAW,CAAI,CAAC,cACpBvB,IAAA,CAACJ,aAAa,EAACmC,IAAI,CAAEA,IAAK,CAACc,UAAU,CAAEA,UAAW,CAACV,MAAM,CAAEA,MAAO,CAACgB,KAAK,CAAEA,KAAM,CAACC,KAAK,CAAEA,KAAM,CAAC,CAAC,cAChGpD,IAAA,QAAQ,CAAC,cAETA,IAAA,CAACH,aAAa,EAACkC,IAAI,CAAEA,IAAK,CAACY,MAAM,CAAEA,MAAO,CAACR,MAAM,CAAEA,MAAO,CAAC,CAAC,cAE5DnC,IAAA,CAACF,YAAY,EAAC6B,KAAK,CAAEA,KAAM,CAAE,CAAC,EAE3B,CAAC,CAEV,CAEA,cAAe,CAAAhB,GAAG,CAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}