{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Ethan/Desktop/Dream Game Site/v4/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Ethan/Desktop/Dream Game Site/v4/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import io from'socket.io-client';import{useEffect,useState}from\"react\";import NameButtons from'./nameButtons';import PlayerSection from'./playerSection';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var socket=io.connect(\"http://localhost:3001\");// FOR LOCAL\n//const socket = io.connect(\"http://www.ethananderson.ca/\"); // FOR PROD\nvar myGuess=\"\";/*\nvar scores = [];\n\n\nconst updateScores = (data) => {\n  scores = data;\n  console.log(scores);\n}\n\nsocket.on(\"update_scores\", updateScores);\n\n*/function App(){// states\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messageReceived=_useState4[0],setMessageReceived=_useState4[1];var _useState5=useState(\"Welcome to Dream Game.\\nPlease select your name:\"),_useState6=_slicedToArray(_useState5,2),textSection=_useState6[0],setTextSection=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),imageSection=_useState8[0],setImageSection=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),name=_useState10[0],setName=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),status=_useState12[0],setStatus=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),players=_useState14[0],setPlayers=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),scores=_useState16[0],setScores=_useState16[1];// player come online\nvar playerJoin=function playerJoin(data){// set name on user\nsetName(data);// update player list on user\nsetPlayers(function(previous){return[].concat(_toConsumableArray(previous),[data]);});// update player list on peers\nsocket.emit(\"player_join_u\",{data:data});};// start round\nvar start=function start(){socket.emit(\"get_random_dream_u\");};// player guesses\nvar guess=function guess(data){myGuess=data;socket.emit(\"guess\");console.log(\"guesser: \"+name);console.log(\"my guess: \"+myGuess);setStatus(\"guessed\");};// send message to socket\nvar sendMessage=function sendMessage(){socket.emit(\"send_message\",{message:message,name:name});};// socket handlers -----------\nvar receiveMessage=function receiveMessage(data){setMessageReceived(data.name+\": \"+data.message);};var playerJoinD=function playerJoinD(data){setPlayers(function(previous){return[].concat(_toConsumableArray(previous),[data.data]);});};var getRandomDreamD=function getRandomDreamD(data){setTextSection(data.dream);setStatus(\"during\");console.log(\"dreamer: \"+data.dreamer);var link=data.dream.split(\" \").join(\"_\");setImageSection(\"https://image.pollinations.ai/prompt/\"+link);};// when all players guessed\nvar allGuessed=function allGuessed(answer){if(answer===myGuess){setTextSection(\"CORRECT\\nANSWER: \"+answer+\"\\nYou guessed: \"+myGuess);}else{setTextSection(\"INCORRECT\\nANSWER: \"+answer+\"\\nYou guessed: \"+myGuess);}setStatus(\"after\");};var updateScores=function updateScores(data){setScores(data);console.log(scores);};// receive from socket\nuseEffect(function(){socket.on(\"receive_message\",receiveMessage);socket.on(\"player_join_d\",playerJoinD);socket.on(\"get_random_dream_d\",getRandomDreamD);socket.on(\"all_guessed\",allGuessed);socket.on(\"update_scores\",updateScores);return function(){socket.off(\"receive_message\");socket.off(\"player_join_d\");socket.off(\"get_random_dream_d\");socket.off(\"all_guessed\");};},[socket]);// display\nreturn/*#__PURE__*/_jsxs(\"div\",{class:\"container w-60 text-center\",className:\"App\",style:{whiteSpace:\"pre-line\"},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Name: \",name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{children:textSection}),/*#__PURE__*/_jsx(NameButtons,{name:name,playerJoin:playerJoin,status:status,start:start,guess:guess}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Players:\"}),/*#__PURE__*/_jsx(\"div\",{children:players.map(function(item){return/*#__PURE__*/_jsx(\"div\",{children:item});})}),/*#__PURE__*/_jsx(PlayerSection,{scores:scores}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:imageSection,alt:\"\"})})]});}export default App;/*\n\n      <input \n        placeholder=\"Message...\" \n        onChange={(event) => {\n          setMessage(event.target.value);\n        }}\n      />\n      <button onClick={sendMessage}> Send Message</button>\n\n      <h1>Message:</h1>\n      {messageReceived}\n*/","map":{"version":3,"names":["io","useEffect","useState","NameButtons","PlayerSection","jsxs","_jsxs","jsx","_jsx","socket","connect","myGuess","App","_useState","_useState2","_slicedToArray","message","setMessage","_useState3","_useState4","messageReceived","setMessageReceived","_useState5","_useState6","textSection","setTextSection","_useState7","_useState8","imageSection","setImageSection","_useState9","_useState10","name","setName","_useState11","_useState12","status","setStatus","_useState13","_useState14","players","setPlayers","_useState15","_useState16","scores","setScores","playerJoin","data","previous","concat","_toConsumableArray","emit","start","guess","console","log","sendMessage","receiveMessage","playerJoinD","getRandomDreamD","dream","dreamer","link","split","join","allGuessed","answer","updateScores","on","off","class","className","style","whiteSpace","children","map","item","src","alt"],"sources":["C:/Users/Ethan/Desktop/Dream Game Site/v4/src/App.js"],"sourcesContent":["import io from 'socket.io-client'\nimport { useEffect, useState} from \"react\";\nimport NameButtons from './nameButtons';\nimport PlayerSection from './playerSection';\nconst socket = io.connect(\"http://localhost:3001\"); // FOR LOCAL\n//const socket = io.connect(\"http://www.ethananderson.ca/\"); // FOR PROD\nvar myGuess = \"\";\n/*\nvar scores = [];\n\n\nconst updateScores = (data) => {\n  scores = data;\n  console.log(scores);\n}\n\nsocket.on(\"update_scores\", updateScores);\n\n*/\nfunction App() {\n  // states\n  const [message, setMessage] = useState(\"\");\n  const [messageReceived, setMessageReceived] = useState(\"\");\n  const [textSection, setTextSection] = useState(\"Welcome to Dream Game.\\nPlease select your name:\");\n  const [imageSection, setImageSection] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [status, setStatus] = useState(\"\");\n  const [players, setPlayers] = useState([]);\n  const [scores, setScores] = useState([]);\n\n  // player come online\n  const playerJoin = (data) => {\n    // set name on user\n    setName(data);\n    // update player list on user\n    setPlayers(previous => [...previous, data])\n    // update player list on peers\n    socket.emit(\"player_join_u\", { data });\n  };\n\n  // start round\n  const start = () => {\n    socket.emit(\"get_random_dream_u\");\n  };\n\n  // player guesses\n  const guess = (data) => {\n    myGuess = data;\n    socket.emit(\"guess\");\n    console.log(\"guesser: \" + name);\n    console.log(\"my guess: \" + myGuess);\n    setStatus(\"guessed\");\n  }\n\n  // send message to socket\n  const sendMessage = () => {\n    socket.emit(\"send_message\", { message, name });\n  }\n\n  // socket handlers -----------\n  const receiveMessage = (data) => {\n    setMessageReceived(data.name + \": \" + data.message);\n  }\n\n  const playerJoinD = (data) => {\n    setPlayers(previous => [...previous, data.data])\n  }\n\n  const getRandomDreamD = (data) => {\n    setTextSection(data.dream);\n    setStatus(\"during\");\n    console.log(\"dreamer: \" + data.dreamer);\n    let link = data.dream.split(\" \").join(\"_\");\n    setImageSection(\"https://image.pollinations.ai/prompt/\"+link);\n  }\n\n  // when all players guessed\n  const allGuessed = (answer) => {\n    if (answer === myGuess) {\n      setTextSection(\"CORRECT\\nANSWER: \" + answer + \"\\nYou guessed: \" + myGuess);\n    } else {\n      setTextSection(\"INCORRECT\\nANSWER: \" + answer + \"\\nYou guessed: \" + myGuess);\n    }\n    setStatus(\"after\");\n  }\n\n  const updateScores = (data) => {\n    setScores(data);\n    console.log(scores);\n  }\n\n  // receive from socket\n  useEffect(() => {\n\n    socket.on(\"receive_message\", receiveMessage);\n    socket.on(\"player_join_d\", playerJoinD);\n    socket.on(\"get_random_dream_d\", getRandomDreamD);\n    socket.on(\"all_guessed\", allGuessed);\n    socket.on(\"update_scores\", updateScores);\n\n    return () => {\n      socket.off(\"receive_message\");\n      socket.off(\"player_join_d\");\n      socket.off(\"get_random_dream_d\");\n      socket.off(\"all_guessed\");\n    };\n\n  }, [socket]);\n\n  // display\n  return (\n    <div class=\"container w-60 text-center\" className=\"App\" style={{whiteSpace: `pre-line`}}>\n\n      <h1>Name: {name}</h1>\n      <br></br>\n\n      <p>{textSection}</p>\n      <NameButtons name={name} playerJoin={playerJoin} status={status} start={start} guess={guess}/>\n      <br></br>\n\n      <h1>Players:</h1>\n      <div>\n        {players.map(item => {\n          return <div>{item}</div>;\n        })}\n      </div>\n      <PlayerSection scores={scores} />\n      <div>\n        <img src={imageSection} alt=\"\"></img>\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n\n/*\n\n      <input \n        placeholder=\"Message...\" \n        onChange={(event) => {\n          setMessage(event.target.value);\n        }}\n      />\n      <button onClick={sendMessage}> Send Message</button>\n\n      <h1>Message:</h1>\n      {messageReceived}\n*/"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}